/* frontend/src/pages/ChatPage.css */

/* --- Общие улучшения стилей --- */
body {
    font-family: 'Inter', sans-serif; /* Используем современный, чистый шрифт Inter; если недоступен, то любой без засечек */
    background-color: #0d0d0d; /* Очень темный фон для всего тела страницы для контраста */
}

.chat-page-wrapper {
    display: flex; /* Используем flexbox для размещения дочерних элементов (сайдбар и основная область) */
    height: calc(100vh - 70px); /* Высота контейнера чата: 100% высоты видимой области минус 70px (предположительно, высота навигации или шапки) */
    max-width: 1200px; /* Максимальная ширина контейнера чата, чтобы он не был слишком широким на больших экранах */
    margin: 20px auto; /* Центрируем контейнер по горизонтали с отступом 20px сверху и снизу */
    background-color: #1a1a1a; /* Темный фон для основного контейнера чата */
    border-radius: 12px; /* Слегка скругленные углы контейнера */
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6); /* Более заметная, мягкая тень для придания объема */
    overflow: hidden; /* Обрезаем содержимое, которое выходит за границы контейнера (например, скругленные углы) */
    color: white; /* Цвет текста по умолчанию внутри этого контейнера */
    border: 1px solid #282828; /* Едва заметная тонкая рамка для лучшего определения границ */
}

/* --- Боковая панель чата (Sidebar) --- */
.chat-sidebar {
    width: 300px; /* Фиксированная ширина боковой панели */
    flex-shrink: 0; /* Запрещает боковой панели сжиматься при недостатке места */
    background-color: #1f1f1f; /* Фон боковой панели, немного светлее основного фона для создания глубины */
    padding: 25px; /* Внутренние отступы внутри боковой панели */
    border-right: 1px solid #282828; /* Разделительная линия справа от боковой панели */
    display: flex; /* Используем flexbox для размещения элементов внутри сайдбара */
    flex-direction: column; /* Элементы внутри сайдбара располагаются вертикально */
    overflow-y: auto; /* Позволяет прокручивать содержимое сайдбара по вертикали, если оно не помещается */
    position: relative; /* Устанавливаем позиционирование для возможных псевдоэлементов или наложений */
}

.chat-sidebar h3 {
    text-align: center; /* Выравнивание заголовка по центру */
    color: #139bc9; /* Яркий, современный бирюзовый цвет для заголовка (акцентный цвет) */
    margin-top: 0; /* Убираем верхний внешний отступ */
    margin-bottom: 30px; /* Увеличиваем нижний внешний отступ под заголовком */
    font-size: 1.6em; /* Размер шрифта заголовка (относительно базового) */
    letter-spacing: 0.5px; /* Небольшой межбуквенный интервал */
    text-shadow: 0 0 5px rgba(0, 188, 212, 0.3); /* Легкое свечение вокруг текста заголовка */
}

.chat-users-list {
    flex-grow: 1; /* Позволяет списку пользователей занимать все доступное пространство по вертикали */
}

.chat-user-item {
    padding: 14px 18px; /* Внутренние отступы для каждого элемента пользователя в списке */
    margin-bottom: 10px; /* Внешний нижний отступ между элементами пользователей */
    background-color: #2b2b2b; /* Фон для элемента пользователя */
    border-radius: 10px; /* Скругленные углы для элемента пользователя */
    cursor: pointer; /* Курсор в виде указателя при наведении */
    transition: background-color 0.25s ease, transform 0.1s ease, box-shadow 0.25s ease; /* Плавные переходы для фона, трансформации и тени при наведении */
    color: #e0e0e0; /* Мягкий белый цвет текста */
    font-size: 1.3em; /* Размер шрифта для имени пользователя */
    display: flex; /* Используем flexbox для расположения элементов внутри */
    align-items: center; /* Выравниваем элементы по центру по вертикали */
    justify-content: space-between; /* Распределяем пространство между элементами (полезно, если будет индикатор онлайна справа) */
    text-align: left; /* Выравнивание текста имени пользователя по левому краю */
}

.chat-user-item:hover {
    background-color: #3a3a3a; /* Цвет фона при наведении */
    transform: translateY(-2px); /* Легкий подъем элемента вверх при наведении */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Тень при наведении */
}

.chat-user-item.active {
    background-color: #00bcd4; /* Цвет фона для активного (выбранного) пользователя, соответствует акцентному цвету */
    color: white; /* Белый цвет текста для активного пользователя */
    font-weight: bold; /* Жирный шрифт для активного пользователя */
    box-shadow: 0 2px 8px rgba(0, 188, 212, 0.4); /* Свечение для активного состояния */
    transform: none; /* Убираем эффект подъема для активного элемента */
}

/* --- Основная область чата --- */
.chat-main-area {
    flex-grow: 1; /* Позволяет основной области чата занимать все оставшееся горизонтальное пространство */
    display: flex; /* Используем flexbox */
    flex-direction: column; /* Элементы внутри располагаются вертикально */
    background-color: #1a1a1a; /* Фон основной области чата, для консистентности */
}

.chat-main-area > h3 { /* Стиль для заголовка с именем выбранного пользователя */
    text-align: left; /* Выравнивание текста заголовка по левому краю */
    color: #00bcd4; /* Цвет заголовка, соответствует акцентному цвету */
    margin-top: 0; /* Убираем верхний внешний отступ */
    padding: 20px 25px; /* Внутренние отступы заголовка */
    margin-bottom: 0; /* Убираем нижний внешний отступ */
    font-size: 1.8em; /* Крупный размер шрифта заголовка */
    background-color: #161616; /* Более темный фон для шапки чата */
    border-bottom: 1px solid #282828; /* Разделительная линия под шапкой */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Легкая тень под шапкой */
    letter-spacing: 0.5px; /* Межбуквенный интервал */
}

.no-chat-selected {
    flex-grow: 1; /* Занимает все доступное пространство */
    display: flex; /* Используем flexbox */
    flex-direction: column; /* Элементы располагаются вертикально */
    justify-content: center; /* Центрируем содержимое по вертикали */
    align-items: center; /* Центрируем содержимое по горизонтали */
    color: #888; /* Мягкий серый цвет текста */
    font-size: 1.2em; /* Размер шрифта */
    text-align: center; /* Выравнивание текста по центру */
    padding: 30px; /* Внутренние отступы */
    background-color: #1a1a1a; /* Убеждаемся, что фон заполняет весь блок */
}

.no-chat-selected h3 {
    color: #00bcd4; /* Цвет заголовка, соответствует акцентному цвету */
    margin-bottom: 15px; /* Нижний внешний отступ */
    font-size: 1.8em; /* Размер шрифта */
    text-shadow: 0 0 5px rgba(0, 188, 212, 0.2); /* Легкое свечение */
}

.messages-scroll-area {
    flex-grow: 1; /* Занимает все доступное пространство по вертикали для сообщений */
    overflow-y: auto; /* Позволяет прокручивать сообщения по вертикали, если их много */
    padding: 15px 25px; /* Внутренние отступы для области прокрутки сообщений */
    margin-bottom: 0; /* Убираем нижний внешний отступ */
    background-color: #1a1a1a; /* Убеждаемся, что фон заполняет всю область */
}

.messages-list {
    display: flex; /* Используем flexbox */
    flex-direction: column; /* Сообщения располагаются вертикально */
    gap: 6px; /* Расстояние между отдельными сообщениями (уменьшено для компактности) */
}

.loading-messages,
.no-messages {
    text-align: center; /* Выравнивание текста по центру */
    color: #777; /* Мягкий серый цвет текста */
    margin-top: 25px; /* Верхний внешний отступ */
    padding: 15px; /* Внутренние отступы */
    font-size: 1.1em; /* Размер шрифта */
}

.error-message {
    color: #ff6b6b; /* Ярко-красный цвет для сообщения об ошибке */
    background-color: rgba(255, 107, 107, 0.15); /* Полупрозрачный красный фон */
    border: 1px solid rgba(255, 107, 107, 0.4); /* Красная рамка */
    padding: 12px 18px; /* Внутренние отступы */
    border-radius: 8px; /* Скругленные углы */
    margin: 15px 0; /* Внешние отступы */
    font-size: 0.95em; /* Размер шрифта */
    box-shadow: 0 2px 5px rgba(255, 107, 107, 0.1); /* Легкая тень */
}

/* --- Элементы сообщения (ОБЛЕГАЮЩИЕ РАЗМЕР ТЕКСТА) --- */
.message-item {
    padding: 4px 8px; /* Сильно уменьшенные внутренние отступы, чтобы блок плотно облегал текст */
    border-radius: 12px; /* Уменьшенные скругленные углы для более компактного вида */
    max-width: 40%; /* Максимальная ширина блока сообщения (если текст длиннее, он переносится) */
    word-wrap: break-word; /* Перенос слов, если они слишком длинные и не помещаются в строку */
    overflow-wrap: break-word; /* Более современная альтернатива word-wrap для переноса длинных слов */
    line-height: 1.1; /* Уменьшенный межстрочный интервал для большей компактности */
    position: relative; /* Позиционирование (для возможных псевдоэлементов или точного размещения времени) */
    box-shadow: 0 0.5px 2px rgba(0, 0, 0, 0.1); /* Очень тонкая и мягкая тень для легкого эффекта объема */
    display: flex; /* Используем flexbox */
    flex-direction: column; /* Элементы внутри сообщения (текст, время) располагаются вертикально */
    animation: fadeIn 0.3s ease-out; /* Анимация появления сообщения */
    font-size: 1em; /* Общий размер шрифта для содержимого сообщения */
    width: fit-content; /* Ключевое свойство: блок занимает ровно столько ширины, сколько нужно его содержимому (до max-width) */
    min-width: 30px; /* Минимальная ширина для очень коротких сообщений (например, одиночных символов) */
}

@keyframes fadeIn { /* Определение анимации плавного появления */
    from { /* Начальное состояние */
        opacity: 0; /* Полностью прозрачный */
        transform: translateY(10px); /* Смещен на 10px вниз */
    }
    to { /* Конечное состояние */
        opacity: 1; /* Полностью видимый */
        transform: translateY(0); /* Возвращается на исходную позицию */
    }
}

.my-message {
    align-self: flex-end; /* Выравнивание всего блока сообщения по правому краю контейнера */
    background-color: #00bcd4; /* Акцентный бирюзовый фон для моих сообщений */
    color: white; /* Белый цвет текста для моих сообщений */
    border-bottom-right-radius: 3px; /* Очень маленькое скругление нижнего правого угла (имитация "хвостика") */
    text-align: right; /* Выравнивание текста внутри моего сообщения по правому краю */
}

.other-message {
    align-self: flex-start; /* Выравнивание всего блока сообщения по левому краю контейнера */
    background-color: #2c2c2c; /* Более темный серый фон для сообщений других пользователей */
    color: #f0f0f0; /* Светлый цвет текста для сообщений других пользователей */
    border-bottom-left-radius: 3px; /* Очень маленькое скругление нижнего левого угла (имитация "хвостика") */
    text-align: left; /* Выравнивание текста внутри сообщения другого пользователя по левому краю */
}

.message-sender { /* Имя отправителя (только для чужих сообщений, в своих скрыто) */
    font-weight: 600; /* Полужирный шрифт */
    font-size: 1em; /* Уменьшенный размер шрифта */
    color: #999; /* Серый цвет имени отправителя */
    margin-bottom: 3px; /* Отступ снизу от имени отправителя до текста сообщения */
    text-transform: capitalize; /* Первая буква каждого слова в имени будет заглавной */
}

.my-message .message-sender {
    display: none; /* Скрываем имя отправителя в своих сообщениях */
}

.message-text {
    font-size: 1em; /* Размер шрифта основного текста сообщения (относительно .message-item) */
}

.message-timestamp {
    font-size: 0.55em; /* Очень маленький размер шрифта для метки времени */
    text-align: right; /* Выравнивание времени по правому краю внутри блока сообщения */
    margin-top: 3px; /* Отступ сверху от текста сообщения до метки времени */
    align-self: flex-end; /* Выравнивание метки времени по правому краю внутри flex-контейнера сообщения */
    opacity: 0.7; /* Небольшая прозрачность метки времени */
}

.my-message .message-timestamp {
    color: rgba(255, 255, 255, 0.7); /* Светлый цвет метки времени для моих сообщений */
}

.other-message .message-timestamp {
    color: #777; /* Темный цвет метки времени для чужих сообщений */
}

/* --- Форма ввода сообщения --- */
.message-form {
    display: flex; /* Используем flexbox для расположения поля ввода и кнопки */
    gap: 10px; /* Расстояние между полем ввода и кнопкой */
    padding: 15px 20px; /* Внутренние отступы для всей формы */
    border-top: 1px solid #282828; /* Разделительная линия сверху формы */
    background-color: #161616; /* Темный фон для формы ввода */
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3); /* Тень сверху формы */
    position: sticky; /* Делает форму "липкой" (прилипает к низу экрана при прокрутке) */
    bottom: 0; /* Прилипает к нижней границе */
    z-index: 100; /* Обеспечивает, чтобы форма была поверх других элементов при прокрутке */
}

.message-form input[type="text"] {
    flex-grow: 1; /* Поле ввода занимает все доступное пространство по горизонтали */
    padding: 10px 18px; /* Внутренние отступы поля ввода */
    border: 1px solid #3a3a3a; /* Цвет рамки поля ввода */
    border-radius: 22px; /* Скругленные углы поля ввода (форма "пилюли") */
    background-color: #222; /* Темный фон поля ввода */
    color: white; /* Цвет текста в поле ввода */
    font-size: 0.95em; /* Размер шрифта в поле ввода */
    outline: none; /* Убираем стандартную рамку при фокусе */
    transition: border-color 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease; /* Плавные переходы при изменении состояния */
}

.message-form input[type="text"]:focus {
    border-color: #00bcd4; /* Цвет рамки при фокусе, соответствует акцентному цвету */
    background-color: #282828; /* Фон поля ввода при фокусе */
    box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.3); /* Легкое свечение при фокусе */
}

.message-form button {
    padding: 10px 22px; /* Внутренние отступы кнопки */
    border-radius: 22px; /* Скругленные углы кнопки (форма "пилюли") */
    font-size: 0.95em; /* Размер шрифта кнопки */
    flex-shrink: 0; /* Запрещает кнопке сжиматься */
    background-color: #00bcd4; /* Фон кнопки, соответствует акцентному цвету */
    color: white; /* Белый цвет текста кнопки */
    border: none; /* Убираем рамку кнопки */
    cursor: pointer; /* Курсор в виде указателя */
    transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease; /* Плавные переходы при наведении */
    font-weight: 600; /* Полужирный шрифт текста кнопки */
}

.message-form button:hover:not(:disabled) {
    background-color: #00a7bd; /* Слегка темнее фон при наведении (если кнопка не отключена) */
    transform: translateY(-1px); /* Легкий подъем кнопки при наведении */
    box-shadow: 0 4px 10px rgba(0, 188, 212, 0.3); /* Тень при наведении */
}

.message-form button:disabled {
    background-color: #383838; /* Темный серый фон для отключенной кнопки */
    color: #666; /* Темный серый цвет текста для отключенной кнопки */
    cursor: not-allowed; /* Курсор "запрещено" */
    box-shadow: none; /* Убираем тень */
    transform: none; /* Убираем трансформацию */
}

/* --- Стили для полосы прокрутки (Scrollbar) --- */
/* Стиль для полосы прокрутки в WebKit-браузерах (Chrome, Safari) */
.messages-scroll-area::-webkit-scrollbar,
.chat-sidebar::-webkit-scrollbar {
    width: 8px; /* Ширина полосы прокрутки */
}

/* Стиль для дорожки (трека) полосы прокрутки в WebKit-браузерах */
.messages-scroll-area::-webkit-scrollbar-track,
.chat-sidebar::-webkit-scrollbar-track {
    background: #1a1a1a; /* Цвет фона дорожки полосы прокрутки */
    border-radius: 10px; /* Скругленные углы дорожки */
}

/* Стиль для ползунка полосы прокрутки (thumb) в WebKit-браузерах */
.messages-scroll-area::-webkit-scrollbar-thumb,
.chat-sidebar::-webkit-scrollbar-thumb {
    background: #3a3a3a; /* Цвет ползунка полосы прокрутки */
    border-radius: 10px; /* Скругленные углы ползунка */
    border: 2px solid #1a1a1a; /* Рамка вокруг ползунка, чтобы создать эффект "плавающей" полосы */
}

/* Стиль для ползунка полосы прокрутки при наведении в WebKit-браузерах */
.messages-scroll-area::-webkit-scrollbar-thumb:hover,
.chat-sidebar::-webkit-scrollbar-thumb:hover {
    background: #4a4a4a; /* Цвет ползунка при наведении */
}

/* Для Firefox (совместимость с другими браузерами) */
.messages-scroll-area {
    scrollbar-width: thin; /* Тонкая полоса прокрутки */
    scrollbar-color: #3a3a3a #1a1a1a; /* Цвет ползунка и цвет дорожки */
}
.chat-sidebar {
    scrollbar-width: thin; /* Тонкая полоса прокрутки */
    scrollbar-color: #3a3a3a #1a1a1a; /* Цвет ползунка и цвет дорожки */
}